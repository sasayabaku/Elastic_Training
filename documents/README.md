# Step 1 : 環境構築

```bash
$ docker compose up
```
ElasticSearchとKibanaが起動するようになります。

# Step 2: データ登録

`book` documentに、以下のデータをindexする。

```bash
$ curl -X POST -H "Content-Type: application/json" -d \
    '{
        "id": "001",
        "title": "生活",
        "author": "林芙美子",
        "beggining": "私はこのうたが好きで、毎日この室生むろうさんのうたを唱歌のようにうたう。「なににこがれて書くうたぞ」全く、このうたの通り、私はなににこがれているともなく、夜更ふけて、ほとんど毎日机に向っている。そうして、やくざなその日暮らしの小説を書いている。夕御飯が済んで、小さい女中と二人で、油ものは油もの、茶飲み茶碗は茶飲み茶碗と、あれこれと近所の活動写真の話などをしながらかたづけものをして、剪花きりばなに水を替えてやっていると、もうその頃はたいてい八時が過ぎている。三ツの夕刊を手にして、二階の書斎へあがって行くと、火鉢の火がおとろえている。炭をつぎ、鉄瓶てつびんをかけて、湯のわくあいだ、私は三ツの夕刊に眼をとおすのだ。うちでとっているのは、朝日新聞、日日新聞、読売新聞の三ツで、まず眼をとおすのは、芝居や活動の広告のようなものだ。女の心がある、行ってみたいなと思う。永遠の誓いと云うのがある、みんな観に行きたいと思いながら、その広告が場末ばすえの小舎こやにかかるまで行けないでしまうことがたびたびなのだ。"
    }'\
    http://localhost:9200/aozora/_doc
```

**成功時レスポンス**
```json
{
    "_index":"aozora",
    "_type":"_doc",
    "_id":"gmyb4HwBtw8oAslplE_0",
    "_version":1,
    "result":"created",
    "_shards":{
        "total":2,
        "successful":1,
        "failed":0},
        "_seq_no":0,
        "_primary_term":1
    }
}
```

## データ取得して確認
`成功時レスポンス`の _id を使って、データ取得

```bash
$ curl http://localhost:9200/aozora/_doc/gmyb4HwBtw8oAslplE_0
```

**成功時データが返ってきます**

```bash
{
    "_index":"aozora","_type":"_doc","_id":"gmyb4HwBtw8oAslplE_0","_version":1,"_seq_no":0,"_primary_term":1,
    "_ignored":["beggining.keyword"],"found":true,
    "_source":{
        "id": "001",
        "title": "生活",
        "author": "林芙美子",
        "beggining": "私はこのうたが好きで、毎日この室生むろうさんのうたを唱歌のようにうたう。「なににこがれて書くうたぞ」全く、このうたの通り、私はなににこがれているともなく、夜更ふけて、ほとんど毎日机に向っている。そうして、やくざなその日暮らしの小説を書いている。夕御飯が済んで、小さい女中と二人で、油ものは油もの、茶飲み茶碗は茶飲み茶碗と、あれこれと近所の活動写真の話などをしながらかたづけものをして、剪花きりばなに水を替えてやっていると、もうその頃はたいてい八時が過ぎている。三ツの夕刊を手にして、二階の書斎へあがって行くと、火鉢の火がおとろえている。炭をつぎ、鉄瓶てつびんをかけて、湯のわくあいだ、私は三ツの夕刊に眼をとおすのだ。うちでとっているのは、朝日新聞、日日新聞、読売新聞の三ツで、まず眼をとおすのは、芝居や活動の広告のようなものだ。女の心がある、行ってみたいなと思う。永遠の誓いと云うのがある、みんな観に行きたいと思いながら、その広告が場末ばすえの小舎こやにかかるまで行けないでしまうことがたびたびなのだ。"
    }
}
```

## 同様に検索クエリでデータを取得

```bash
$ curl -H "Content-Type: application/json" http://localhost:9200/aozora/_search -d \
    '{
        "query": {
            "match": {
                "id": "001"
            }
        }
    }'
```

<1つしかデータがないので、結果は、取得時と同じ>


# データ削除

```bash
$ curl -X DELETE http://localhost:9200/aozora/_doc/gmyb4HwBtw8oAslplE_0
```


# コンテンツ一覧

- [Bulk APIで一括Index]()